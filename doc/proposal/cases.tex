%first_line
\documentclass[8pt,letterpaper]{article} % letterpaper is american!
\usepackage[letterpaper, margin=1in]{geometry}
%\usepackage{showframe}
\usepackage{multicol}
\usepackage{enumerate}

\usepackage[british,UKenglish,USenglish,english,american]{babel}
\usepackage[pdftex]{graphicx}
\usepackage{tikz,pgf,epstopdf}
%\usepackage{amsfonts,amsmath,amsthm,amssymb}

\usetikzlibrary{fit}

\pagestyle{empty}
\setlength{\parindent}{0mm}

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%
%
%
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
\setlength\columnsep{30pt} 
% this is a hack needed to prevent \item counters from overlapping text
\raggedcolumns
\makeatletter
\newcount\branch@start% as \setcounter isn't global
\newcount\branch@end
\newenvironment{branch}[1][2]{\begin{multicols}{#1}%
  \branch@start\c@enumi% save value of enumi for subsequent leaves
  \branch@end\c@enumi%   need to keep track of largest enumi in all leaves
  }{%set enumi to largest value in the leaves and close multicols
  \ifnum\c@enumi<\branch@end%
    \global\c@enumi\branch@end% we NEED this to take effect globally
  \fi%
\end{multicols}}
\newcommand\newleaf{%
  \columnbreak%
  \ifnum\c@enumi>\branch@end%
    \global\branch@end\c@enumi%
  \fi%
  \setcounter{enumi}{\branch@start}%
}
\makeatother
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%

\usepackage{color}
\usepackage{verbatim}
\usepackage{listings}
\lstset{
  basicstyle=\scriptsize\ttfamily,
  backgroundcolor=\color{lightgray},
  language=bash,
  frame=L,
}

\usepackage{xspace}
\usepackage{url}
\usepackage{cite}

\usepackage{titlesec}
\titlespacing*{\subsubsection}{0pt}{*0}{*0}
\titlespacing*{\subsection}{0pt}{0pt}{*0}
\titlespacing*{\section}{0pt}{0pt}{*0}

\newcommand{\Bold}{\mathbf}

\title{Use cases for PPAML-Eval-Tools}
\date{\today}

\def\pmr{Philip Robinson\xspace}
\def\ms{Matt Stottile\xspace}
\def\cf{Chris Fahlbusch\xspace}

\newenvironment{slimlist}{
  \begin{itemize}
    \setlength{\topsep}{0pt}
    \setlength{\itemsep}{1pt}
    \setlength{\parsep}{0pt}
    \setlength{\parskip}{0pt}
}{\end{itemize}}

\newenvironment{mitemize}[1]{
  % designed to prevent labeled lists from being broken up over page or column boundries. 
  \begin{minipage}{\linewidth}
  \subsection*{#1}
  \begin{slimlist}
}{
\end{slimlist}
\end{minipage}
\vspace{1em}
}

\begin{document}
\pagestyle{empty}
\clearpage%\maketitle

\newcommand{\form}[1]{{\em #1}\xspace}
\def\ptk{\form{peval-toolkit}}
\def\cp{\form{challenge problem}}
\def\tev{\form{quantitative evaluator}}
\def\lev{\form{qualitative evaluator}}
\def\rep{\form{report}}
\def\ds{\form{dataset}}
\def\ins{\form{instance}}
\def\sol{\form{solution}}
\def\gen{\form{generator}}
\def\out{\form{output}}
\def\tm{\form{team}}
\def\rn{\form{run}}
\def\eng{\form{engine}}
\def\t24{\form{TA2-4}}
\def\de{\form{domain expert}}
\def\desc{\form{INI File}}

\def\G{\form{Galois}}
\def\D{\form{DARPA}}
\def\U{\form{UNKNOWN}}

\begin{comment}

\begin{mitemize}{\cp}
\item add a \cp to \ptk
  \begin{quote}
    This is effectively a place holder, the purpose of a \cp is to allow us to index more abstractly into an \ins. A \cp should be stored as a description and/or site-reference. 
    \end{quote}
\item register an \ins to a \cp
  \begin{quote}
    A \sol will address a specific \ins. An \ins needs a description a human readable id$_\#$ a time-period index and an \tev. 
    
    %You should be able to print number of \rn{s} from each \tm for each \ins. You should also be able to ask for all instances from one time period. 
  \end{quote}
\item register a \ds to a \ins
  \begin{quote}
    A \ds should have fetch/\gen instructions (seed needed if produced by \gen). We should be able to verify a \ds's uniqueness and existence separately.
    
    register can also be used to update a \ds{s} directory link. If this is done correctly, we should be able to automatically register \ds{s} that are used (... this may not be true wrt description and retrieval ...)

    {\em\footnotesize also if we are using digests for naming, then we will likely want to have a blocked name as defined by digest of empty directory.}
  \end{quote}
\item unregister \ds, \ins
  \begin{quote}
    If anything is unregistered then we should remove corresponding \rn{s}. The reason to unregister anything is if it was incorrect and needs to be purged. (if we need more disk space we physically delete directory rather than unregister)
  \end{quote}
  
\item look-up a \cp's description and site reference
\item look-up a \ds's fetch/generator instructions
\item look-up which \ins and \ds status 
  \begin{quote}
    Print the \tm{s} that have provided a \sol (and number of \rn{s}) for each \ds in a time-period index or \ins .
    
    The return format should allow us to resolve gaps cleanly when possible. Also should be able to fairly skip missing \ds{s}.
  \end{quote}
\item unpack \ds for use by \tev or \sol if on disk at location

\item revise \ds
\begin{quote}
  we should not need to revise unless we allow for automatic registration and need to update look-up, this is likely a case that is so infrequent that it can be ignored. 
\end{quote}
\end{mitemize}
\end{comment}

\begin{mitemize}{\t24}
\item as \t24, I want to submit an \eng, so that it can be used by my \sol{s} in the evaluation process
  \begin{enumerate}
  \item \t24 develops an \eng
  \item \t24 packages \eng for submission
    \begin{enumerate}
    \item \t24 needs packaging spec
      \begin{enumerate}
      \item tar.bz2 of complete \eng (not partial directory trees)
      \item git url and tag
      \end{enumerate}
    \item \G needs installation instructions
    \item \G needs configuration instructions
    \item \G needs a smoke test
      \begin{enumerate}
      \item minimal code to verify \eng installation and configuration
      \item smoketest.sh wrapping minimal code (any Unix shell)
      \item logs and errors report to stderr
      \item return code is 0 on success, non-zero on failure
      \end{enumerate}
    \end{enumerate}
  \item \t24 submits \eng to \G
    \begin{enumerate}
    \item git repository with tagged releases
    \item our secure site
    \end{enumerate}
  \item \G installs and configures \eng
    \begin{enumerate}
    \item produce configuration script
    \end{enumerate}
  
    \begin{branch}
    \item \G successfully executes \t24's smoke test manually 
    \item \G registers \eng to \ptk
    %\item ppaml use pps.ini -- {\bf to be discussed later after understanding cps submission}
    \item \G informs \t24 team of success smoke test results
      \begin{enumerate}
      \item e-mail
      \end{enumerate}
      
      \newleaf

    \item \G cannot successfully execute \t24's smoke test
    \item \t24 receives failure notification from \G
      \begin{enumerate}
      \item e-mail
      \item crash log
      \end{enumerate}
    \end{branch}
  \item this completes this use case
  \end{enumerate}

\item as \t24, I want to submit a \sol, so that it can be evaluated
  \begin{enumerate}
  \item \t24 develops a \sol
  \item \t24 packages the \sol
    \begin{enumerate}
    \item \t24 needs a packaging spec
    \item \G needs execution instructions
    \item \G needs a sample \desc
    \item \G needs a smoketest.conf configuration file 
    \end{enumerate}
    \begin{branch}
    \item \G successfully executes \t24's smoke manually
    \item \G updates \desc to reflect their system environment
      \newleaf
    \item \G Fails to execute \t24's smoke
    \item \t24 recieves failure notification from \G
      \begin{enumerate}
      \item e-mail
      \item crash log
      \end{enumerate}
    \end{branch}
  \end{enumerate}
\item as \G, I want to run an \eng against multiple \sol{s}, so that I can use a \tev
  %\item as \G, I want to know which \eng{s} have been submitted within a time-period index, so that I can quickly check on \tm{s}' participation status
  %\item as \t24 and \G, I want to run the \tev, so that I can generate \rep{s} and see my performance status
\item[backlog::] extend running multiple \eng{s} against a \sol to \tm{s}
\end{mitemize}


\begin{mitemize}{\de}
\item as a \de, I have been selected to submit a \cp, so that it can be used in the evaluation process
  \begin{enumerate}
    
  \item as a \de, I want to 
    \begin{enumerate}
    \item \ds
      \begin{enumerate}
      \item testing
      \item training
      \item evaluation
      \end{enumerate}
    \item (optional) dataset  \gen
    \item \tev description for \t24
    \item \tev implementation for \G and \t24
    \item reference implementation of \sol for \G 
    \item reference materials for \t24 
    \end{enumerate}
  \item \G with \de as a consultant will provide visualisation tools to \rep output from \tev{s}
    \begin{enumerate}
    \item \G needs ready access to \de
    \end{enumerate}
  \end{enumerate}
\end{mitemize}
% change enumeration to be engine.value

\begin{mitemize}{\G}
\item as \G or \t24 I want to run a \sol against a \ds for a \cp in \ptk, so that I can later run a \tev
  \begin{enumerate}
  \item \G takes inventory of prerequisites:
    \begin{enumerate}
    \item \de has provided a \cp with both public and private \ds{s}
    \item \t24 has provided a tested and correctly formed \eng and \sol representing a specific \cp
    \item \t24 has provided the \desc to describe 
      \begin{enumerate}
      \item \eng
      \item \sol
      \item \cp
      \end{enumerate}
    \end{enumerate}
  \item Update the \desc so that I can execute the provided \sol from the \ptk
    \begin{enumerate}
    \item new `relative root directories'
    \item possibly swap from public to private \ds
    \item additional label information if needed
    \end{enumerate}
  \item using the \ptk run the \sol, and check there are no foreign artifacts so that, later, we can run all appropriate \sol:\ds pairs
    
    \begin{branch}
    \item \sol terminates successfully
      \newleaf
    \item \sol inappropriately terminates
      \begin{enumerate}
      \item malformed \desc
      \item program crash
      \item watchdog terminates program
      \item missing / mislabeled output or log
      \end{enumerate}
    \item send e-mail with termination info
    \end{branch}
    
  \item This completes the use case
  \end{enumerate}
  
\item as \G I want to run all appropriate \sol:\ds pairs that are registered to \ptk, so that I can have volumes of results ready for \tev 
  \begin{enumerate}
  \item \G retrieves all possible \sol:\ds pairs
  \item \G sorts pairs for execution order
  \item \G executes runs of \sol:\ds pairs
  \end{enumerate}
\item as \G I want to run a \tev with \ptk so that I can gather results for \rep
  \begin{enumerate}
  \item \G takes inventory of prerequisites:
    \begin{enumerate}
    \item existing \sol{s} have been run from within the \ptk
    \item a \tev implementation has been provided and registered to \ptk
    \item \ds{s} for \tev have been registered to \ptk
    \end{enumerate}
  \item \G retrieves list of runs associated with a specific \cp
    \begin{branch}
    \item \tev terminates successfuly
    \item previous \tev results for runs are overwritten
      \newleaf
    \item \tev inaroppropriately terminates
    \end{branch}

  
\item \G runs evaluator associated with \cp, overriding previous \tev results
\end{enumerate}
\item as \G I want to act as a \lev on a \sol so that I can have complete \rep
  \begin{enumerate}
  \item[] this is considered trivial and has been left as an exercise for the reader
  \end{enumerate}
  
\end{mitemize}
\end{document}
