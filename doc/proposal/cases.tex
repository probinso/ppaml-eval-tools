%first_line
\documentclass[8pt,letterpaper]{article} % letterpaper is american!
\usepackage[letterpaper, margin=.75in]{geometry}
%\usepackage{showframe}
\usepackage{multicol}
\usepackage{enumerate}

\usepackage[british,UKenglish,USenglish,english,american]{babel}
\usepackage[pdftex]{graphicx}
\usepackage{tikz,pgf,epstopdf}
%\usepackage{amsfonts,amsmath,amsthm,amssymb}

\usetikzlibrary{fit}

\pagestyle{empty}
\setlength{\parindent}{0mm}

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%
%
%
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
\setlength\columnsep{30pt} 
% this is a hack needed to prevent \item counters from overlapping text
\raggedcolumns
\makeatletter
\newcount\branch@start% as \setcounter isn't global
\newcount\branch@end
\newenvironment{branch}[1][2]{\begin{multicols}{#1}%
  \branch@start\c@enumi% save value of enumi for subsequent leaves
  \branch@end\c@enumi%   need to keep track of largest enumi in all leaves
  }{%set enumi to largest value in the leaves and close multicols
  \ifnum\c@enumi<\branch@end%
    \global\c@enumi\branch@end% we NEED this to take effect globally
  \fi%
\end{multicols}}
\newcommand\newleaf{%
  \columnbreak%
  \ifnum\c@enumi>\branch@end%
    \global\branch@end\c@enumi%
  \fi%
  \setcounter{enumi}{\branch@start}%
}
\makeatother
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%

\usepackage{color}
\usepackage{verbatim}
\usepackage{listings}
\lstset{
  basicstyle=\scriptsize\ttfamily,
  backgroundcolor=\color{lightgray},
  language=bash,
  frame=L,
}

\usepackage{xspace}
\usepackage{url}
\usepackage{cite}

\usepackage{titlesec}
\titlespacing*{\subsubsection}{0pt}{*0}{*0}
\titlespacing*{\subsection}{0pt}{0pt}{*0}
\titlespacing*{\section}{0pt}{0pt}{*0}

\newcommand{\Bold}{\mathbf}

\title{Use cases for PPAML-Eval-Tools}
\date{\today}

\def\pmr{Philip Robinson\xspace}
\def\ms{Matt Stottile\xspace}
\def\cf{Chris Fahlbusch\xspace}

\newenvironment{slimlist}{
  \begin{itemize}
    \setlength{\topsep}{0pt}
    \setlength{\itemsep}{1pt}
    \setlength{\parsep}{0pt}
    \setlength{\parskip}{0pt}
}{\end{itemize}}

\newenvironment{mitemize}[1]{
  % designed to prevent labeled lists from being broken up over page or column boundries. 
  %\begin{minipage}{\linewidth}
  \subsection*{#1}
  \begin{slimlist}
}{
\end{slimlist}
%\end{minipage}
\vspace{1em}
\pagebreak
}

\begin{document}
\pagestyle{empty}
\clearpage%\maketitle

\newcommand{\form}[1]{{\em #1}\xspace}
\def\ptk{\form{peval-toolkit}}
\def\cp{\form{challenge problem}}
\def\tev{\form{quantitative evaluator}}
\def\lev{\form{qualitative evaluator}}
\def\rep{\form{report}}
\def\ds{\form{data-set}}
\def\gs{\form{ground-truth}}
\def\ins{\form{instance}}
\def\sol{\form{solution}}
\def\gen{\form{generator}}
\def\out{\form{output}}
\def\tm{\form{team}}
\def\rn{\form{run}}
\def\eng{\form{engine}}
\def\t24{\form{TA2-4}}
\def\de{\form{domain expert}}
\def\desc{\form{INI File}}

\def\G{\form{Galois}}
\def\D{\form{DARPA}}
\def\U{\form{UNKNOWN}}

\begin{mitemize}{\t24}
\item as \t24, I want to submit an \eng, so that it can be used by my \sol{s} in the evaluation process
  \begin{enumerate}
  \item \t24 develops an \eng
  \item \t24 packages \eng for submission
    \begin{enumerate}
    \item \t24 needs packaging spec
      \begin{enumerate}
      \item tar.bz2 of complete \eng (not partial directory trees)
      \item git url and tag
      \end{enumerate}
    \item \G needs installation instructions
    \item \G needs configuration instructions
    \item \G needs a smoke test
      \begin{enumerate}
      \item minimal code to verify \eng installation and configuration
      \item smoketest.sh wrapping minimal code (any Unix shell)
      \item logs and errors report to stderr
      \item return code is 0 on success, non-zero on failure
      \end{enumerate}
    \end{enumerate}
  \item \t24 submits \eng to \G
    \begin{enumerate}
    \item git repository with tagged releases
    \item our secure site
    \end{enumerate}
  \item \G installs and configures \eng
    \begin{enumerate}
    \item \G produces \eng installation script
    \item \G produces \eng configuration script
    \end{enumerate}
  
    \begin{branch}
    \item \G successfully executes \t24's smoke test manually 
    \item \G registers \eng to \ptk
    %\item ppaml use pps.ini -- {\bf to be discussed later after understanding cps submission}
    \item \G informs \t24 team of success smoke test results
      \begin{enumerate}
      \item e-mail
      \end{enumerate}
      
      \newleaf

    \item \G cannot successfully execute \t24's smoke test
    \item \t24 receives failure notification from \G
      \begin{enumerate}
      \item e-mail
      \item crash log
      \end{enumerate}
    \end{branch}
  \item this completes this use case
  \end{enumerate}

\item as \t24, I want to submit a \sol, so that it can be evaluated
  \begin{enumerate}
  \item \t24 develops a \sol
  \item \t24 packages the \sol
    \begin{enumerate}
    \item \t24 needs a packaging spec
    \item \G needs execution instructions
    %\item \G needs a sample \desc
    \item \G needs a smoketest configuration file
    \item \G needs expected resource requirements for both smoke and normal runs
      \begin{enumerate}
      \item complete execution path
      \item minimal iterations
      \item estimated time and space requirements
      \end{enumerate}
    \end{enumerate}
    \begin{branch}
    \item \G successfully executes \t24's smoke manually
    \item \G is ready to run \sol against approved \ds
    \item \G register \sol to \ptk
    \item \G informs \t24 of time/space deltas for smoketest
      \newleaf
    \item \G Fails to execute \t24's smoke
    \item \t24 receives failure notification from \G
      \begin{enumerate}
      \item e-mail
      \item crash log
      \end{enumerate}
    \end{branch}
  \item this ends the use case
  \end{enumerate}
  %\item as \G, I want to know which \eng{s} have been submitted within a time-period index, so that I can quickly check on \tm{s}' participation status
  %\item as \t24 and \G, I want to run the \tev, so that I can generate \rep{s} and see my performance status
\end{mitemize}


\begin{mitemize}{\de}
\item as a \de, I have been selected to submit a \cp, so that it can be used in the evaluation process
  \begin{enumerate}
    
  \item as a \de, I will provide 
    \begin{enumerate}
    \item \cp definition
    \item \cp poster 
    \item \ds and corresponding \gs (expected results)
      \begin{enumerate}
      \item testing
      \item training
      \end{enumerate}
    \item (optional) dataset  \gen
    \item \tev description for \G and \t24
    \item \tev implementation (when applicable) for \G and \t24
    \item reference implementation of \sol for \G
    \item additional reference materials for \t24 
    \end{enumerate}
  \item[{\bf see:}] \url{http://ppaml.galois.com/wiki/wiki/ChallengeProblems}
  \item \G reviews and approves the \cp and \ds{s}
    \begin{enumerate}
    \item \G links \cp information to the PPAML wiki
    \item \G registers the \ds, \cp, and \tev to \ptk
    \item \G or \de uploads \ds to Midas
    \item \G notifies \t24
    \end{enumerate}
  \item \G with \de as a consultant will provide visualization tools to \rep output from \tev{s}
    \begin{enumerate}
    \item \G needs ready access to \de for evaluation support
    \item \t24 needs ready access to \de for \cp support
    \end{enumerate}
  \item This completes the use case
  \end{enumerate}
\end{mitemize}
% change enumeration to be engine.value

\begin{mitemize}{\G}
\item as \G or \t24 I want to run a \sol against a \ds for a \cp in \ptk, so that I can later run a \tev
  \begin{enumerate}
  \item \G takes inventory of prerequisites:
    \begin{enumerate}
    \item \de has provided a \cp with both public and private \ds{s}
    \item \t24 has provided a tested and correctly formed \eng and \sol representing a specific \cp
    \item \t24 has provided the \desc to describe 
      \begin{enumerate}
      \item \eng
      \item \sol
      \item \cp
      \end{enumerate}
    \end{enumerate}
  \item Update the \desc so that I can execute the provided \sol from the \ptk
    \begin{enumerate}
    \item[] This is done automatically and will require a 'registered artifacts listing tool in the \ptk
    \item new `relative root directories' ... 
    \item possibly swap from public to private \ds
    \item additional label information if needed
    \end{enumerate}
  \item using the \ptk run the \sol, and check there are no foreign artifacts so that, later, we can run all appropriate \sol:\ds pairs
    
    \begin{branch}
    \item \sol terminates successfully
    \item this saves  the run to the \ptk
      \newleaf
    \item \sol inappropriately terminates
      \begin{enumerate}
      \item[] a generated \desc can't be malformed
      \item program crash
      \item watchdog terminates program
      \item missing / mislabeled output or log
      \end{enumerate}
    \item send e-mail with termination info
    \end{branch}
    
  \item This completes the use case
  \end{enumerate}
  
\item as \G I want to run all appropriate \sol:\ds pairs that are registered to \ptk, so that I can have volumes of results ready for \tev 
  \begin{enumerate}
  \item \G retrieves all possible \sol:\ds pairs
  \item \G sorts pairs for execution order
  \item \G executes runs of \sol:\ds pairs
  \item[] this has no failure case, because it has already passed the previous step
  \item this completes the use case
  \end{enumerate}

\item as \G I want to execute a \tev with \ptk so that I can gather results for \rep
  \begin{enumerate}
  \item \G takes inventory of prerequisites:
    \begin{enumerate}
    \item existing \sol{s} have been run from within the \ptk
    \item a \tev implementation has been provided and registered to \ptk
    \item \gs for \tev have been registered to \ptk
    \end{enumerate}
  \item \G executes \tev over a run associated with a specific \cp, \ds, \gs, and \sol
    \begin{enumerate}
    \item \G needs run-id or tag
    \end{enumerate}
    \begin{branch}
    \item \tev terminates successfully
    \item \tev report info is captured by the \ptk
      \newleaf
    \item \tev inappropriately terminates
    \begin{enumerate}
    \item wrong format/naming of \sol output
    \item \tev is intolerant of formatting
    \item \tev crashes
    \end{enumerate}
  \item email crash info to appropriate \tm

    \end{branch}

  
\item this completes this use case
\end{enumerate}

\item as \G I want progress and status information over a given time period, so that I can harass the correct teams
\item as \G I want to act as a \lev on a \sol so that I can have complete \rep
  \begin{enumerate}
  \item[] this is considered trivial and has been left as an exercise for the reader
  \end{enumerate}
  
\end{mitemize}
\end{document}
